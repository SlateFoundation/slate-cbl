<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">Ext.define(&#39;SlateDemonstrationsStudent.view.ContentAreaStatus&#39;, {
    extend: &#39;Ext.Component&#39;,
    xtype: &#39;slate-demonstrations-student-contentareastatus&#39;,
    requires: [
    ],

    config: {
        // required inputs
        contentAreaTitle: null,
        level: null,
        percentComplete: 0,
        percentMissed: 0,
        missed: null,
        average: null,
        growth: null,

        // optional config
        percentFormat: &#39;0%&#39;,
        averageFormat: &#39;0.##&#39;,
        growthFormat: &#39;0.# yr&#39;
    },

    cls: [&#39;cbl-competency-panel&#39;, &#39;cbl-contentarea-status&#39;],
    renderTpl: [
        &#39;&lt;header class=&quot;panel-header&quot;&gt;&#39;,
            &#39;&lt;h3 class=&quot;header-title&quot;&gt;My &lt;span id=&quot;{id}-contentAreaTitleEl&quot; data-ref=&quot;contentAreaTitleEl&quot;&gt;{contentAreaTitle}&lt;/span&gt; Competencies&lt;/h3&gt;&#39;,
        &#39;&lt;/header&gt;&#39;,

        &#39;&lt;div class=&quot;panel-body&quot;&gt;&#39;,
            &#39;&lt;div id=&quot;{id}-meterEl&quot; data-ref=&quot;meterEl&quot; class=&quot;cbl-progress-meter&quot;&gt;&#39;,
                &#39;&lt;div id=&quot;{id}-meterBarEl&quot; data-ref=&quot;meterBarEl&quot; class=&quot;cbl-progress-bar&quot; style=&quot;width: {percentComplete:number(values.percentFormat)}&quot;&gt;&lt;/div&gt;&#39;,
                &#39;&lt;div id=&quot;{id}-meterBarMissedEl&quot; data-ref=&quot;meterBarMissedEl&quot; class=&quot;cbl-progress-bar cbl-progress-bar-missed&quot; style=&quot;width: {percentMissed:number(values.percentFormat)}; left: {percentComplete:number(values.percentFormat)}&quot;&gt;&lt;/div&gt;&#39;,
                &#39;&lt;div id=&quot;{id}-meterLevelEl&quot; data-ref=&quot;meterLevelEl&quot; class=&quot;cbl-progress-level no-select&quot;&gt;&lt;tpl if=&quot;level&quot;&gt;Y{level - 8}&lt;/tpl&gt;&lt;/div&gt;&#39;,
                &#39;&lt;div id=&quot;{id}-meterPercentEl&quot; data-ref=&quot;meterPercentEl&quot; class=&quot;cbl-progress-percent&quot;&gt;{percentComplete:number(values.percentFormat)}&lt;/div&gt;&#39;,
            &#39;&lt;/div&gt;&#39;,

            &#39;&lt;div class=&quot;stats-ct&quot;&gt;&#39;,
                &#39;&lt;table class=&quot;stats&quot;&gt;&#39;,
                    &#39;&lt;thead&gt;&#39;,
                        &#39;&lt;th&gt;Missed Skills&lt;/th&gt;&#39;,
                        &#39;&lt;th&gt;Overall Performance Level&lt;/th&gt;&#39;,
                        &#39;&lt;th&gt;Overall Growth&lt;/th&gt;&#39;,
                    &#39;&lt;/thead&gt;&#39;,

                    &#39;&lt;tbody&gt;&#39;,
                        &#39;&lt;td id=&quot;{id}-missedEl&quot; data-ref=&quot;missedEl&quot;&gt;&#39;,
                            &#39;&lt;tpl if=&quot;missed !== null&quot;&gt;&#39;,
                                &#39;{missed}&#39;,
                            &#39;&lt;tpl else&gt;&#39;,
                                &#39;&amp;mdash;&#39;,
                            &#39;&lt;/tpl&gt;&#39;,
                        &#39;&lt;/td&gt;&#39;,
                        &#39;&lt;td id=&quot;{id}-averageEl&quot; data-ref=&quot;averageEl&quot;&gt;&#39;,
                            &#39;&lt;tpl if=&quot;average&quot;&gt;&#39;,
                                &#39;{average:number(values.averageFormat)}&#39;,
                            &#39;&lt;tpl else&gt;&#39;,
                                &#39;&amp;mdash;&#39;,
                            &#39;&lt;/tpl&gt;&#39;,
                        &#39;&lt;/td&gt;&#39;,
                        &#39;&lt;td id=&quot;{id}-growthEl&quot; data-ref=&quot;growthEl&quot;&gt;&#39;,
                            &#39;&lt;tpl if=&quot;growth&quot;&gt;&#39;,
                                &#39;{growth:number(values.growthFormat)}&#39;,
                            &#39;&lt;tpl else&gt;&#39;,
                                &#39;&amp;mdash;&#39;,
                            &#39;&lt;/tpl&gt;&#39;,
                        &#39;&lt;/td&gt;&#39;,
                    &#39;&lt;/tbody&gt;&#39;,
                &#39;&lt;/table&gt;&#39;,
            &#39;&lt;/div&gt;&#39;,
        &#39;&lt;/div&gt;&#39;
    ],
    childEls: [
        &#39;contentAreaTitleEl&#39;,
        &#39;meterEl&#39;,
        &#39;meterBarEl&#39;,
        &#39;meterBarMissedEl&#39;,
        &#39;meterLevelEl&#39;,
        &#39;meterPercentEl&#39;,
        &#39;missedEl&#39;,
        &#39;averageEl&#39;,
        &#39;growthEl&#39;
    ],


    // component template methods
    initRenderData: function() {
        var me = this;

        return Ext.apply(this.callParent(), {
            percentFormat: me.getPercentFormat(),
            averageFormat: me.getAverageFormat(),
            growthFormat: me.getGrowthFormat(),

            contentAreaTitle: me.getContentAreaTitle(),
            level: me.getLevel(),
            percentComplete: me.getPercentComplete(),
            percentMissed: me.getPercentMissed(),
            missed: me.getMissed(),
            average: me.getAverage(),
            growth: me.getGrowth()
        });
    },


    // config handlers
    updateContentAreaTitle: function(title) {
        if (this.rendered) {
            this.contentAreaTitleEl.update(title);
        }
    },

    updateLevel: function(newLevel, oldLevel) {
        var me = this;

        if (oldLevel) {
            me.removeCls(&#39;cbl-level-&#39; + oldLevel);
        }

        if (newLevel) {
            me.addCls(&#39;cbl-level-&#39; + newLevel);
        }

        if (me.rendered) {
            me.meterLevelEl.update(newLevel ? &#39;Y&#39;+(newLevel - 8) : &#39;&#39;);
        }
    },

    applyPercentComplete: function(percentComplete) {
        return percentComplete || 0;
    },

    updatePercentComplete: function(percentComplete) {
        var me = this;

        if (me.rendered) {
            percentComplete = Ext.util.Format.number(percentComplete, me.getPercentFormat());

            me.meterBarEl.setStyle(&#39;width&#39;, percentComplete);
            me.meterBarMissedEl.setStyle(&#39;left&#39;, percentComplete);
            me.meterPercentEl.update(percentComplete);
        }
    },

    applyPercentMissed: function(percentMissed) {
        return percentMissed || 0;
    },

    updatePercentMissed: function(percentMissed) {
        var me = this;

        if (me.rendered) {
            percentMissed = Ext.util.Format.number(percentMissed, me.getPercentFormat());
            me.meterBarMissedEl.setStyle(&#39;width&#39;, percentMissed);
        }
    },

    updateMissed: function(missed) {
        if (this.rendered) {
            this.missedEl.update(Ext.isNumber(missed) ? missed.toString() : &#39;&amp;mdash;&#39;);
        }
    },

    updateAverage: function(average) {
        var me = this;

        if (me.rendered) {
            me.averageEl.update(Ext.util.Format.number(average, me.getAverageFormat()));
        }
    },

    updateGrowth: function(growth) {
        var me = this;

        if (me.rendered) {
            me.growthEl.update(Ext.util.Format.number(growth, me.getGrowthFormat()));
        }
    }
});</pre>
</body>
</html>
